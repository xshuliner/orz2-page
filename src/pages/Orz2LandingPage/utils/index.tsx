import { useState, useEffect } from "react";

const ADJECTIVES = [
  "仗剑天涯的",
  "独行千里的",
  "笑看风云的",
  "负剑问道的",
  "醉酒当歌的",
  "白衣胜雪的",
  "踏雪无痕的",
  "行走江湖的",
  "月下独酌的",
  "清风徐来的",
  "夜行无声的",
  "剑胆琴心的",
  "快意恩仇的",
  "剑指天涯的",
  "一剑西来的",
  "笑傲尘世的",
  "不问归期的",
  "策马奔腾的",
  "隐于市井的",
  "逆风而行的",
  "饮雪煮茶的",
  "对影成双的",
  "仰望星河的",
  "披星戴月的",
  "负霜踏雪的",
  "清风明月的",
  "执灯夜行的",
  "挑灯看剑的",
  "一身煞气的",
  "一身傲骨的",
  "烟雨迷离的",
  "风雪同行的",
  "策马入关的",
  "千山独行的",
  "孤身问路的",
  "行歌天涯的",
  "对酒当歌的",
  "清茶煮雨的",
  "闲云野鹤的",
  "淡看风云的",
  "不羁放纵的",
  "笑对生死的",
  "斩破长夜的",
  "追光逐影的",
  "不问前路的",
  "与世无争的",
  "剑眉星目的",
  "素衣轻裘的",
  "一念成魔的",
  "一念成佛的",
  "胸怀山海的",
  "乘风破浪的",
  "藏锋守拙的",
  "不染尘埃的",
  "与风同游的",
  "与云同眠的",
  "与雪同归的",
  "乘月而来的",
  "踏星而行的",
  "逆水行舟的",
  "独钓寒江的",
  "仰天长啸的",
  "对月长歌的",
  "闲庭信步的",
  "半醒半醉的",
  "心如止水的",
  "桀骜不驯的",
  "不负今朝的",
  "不惧风雨的",
  "浪迹天涯的",
  "与剑为伴的",
  "与酒为友的",
  "落笔生花的",
  "剑意如霜的",
  "眉藏锋芒的",
  "心怀热血的",
  "道心不灭的",
  "身轻似燕的",
  "来去无踪的",
  "出手如电的",
  "气定神闲的",
  "笑看红尘的",
  "不屑名利的",
  "云卷云舒的",
  "月白风清的",
  "霜雪千里的",
  "风月无边的",
  "星河入梦的",
  "青灯古佛的",
  "执剑踏歌的",
  "一剑封喉的",
  "风吹不动的",
  "浪打不倒的",
  "行至天光的",
  "远赴人间的",
  "从不回头的",
  "久经风霜的",
  "久历江湖的",
  "与龙同眠的",
  "与虎同行的",
  "笑行陌路的",
  "行至天涯的",
];

const NOUNS = [
  "游侠",
  "剑客",
  "刀客",
  "游僧",
  "行者",
  "浪人",
  "过客",
  "说书人",
  "酒客",
  "剑修",
  "凡人",
  "隐士",
  "散人",
  "侠客",
  "浪客",
  "旅人",
  "捕快",
  "镖师",
  "书生",
  "先生",
  "行脚僧",
  "剑仙",
  "狂徒",
  "夜行人",
  "说书客",
  "说笑人",
  "酒中仙",
  "客卿",
  "漠上客",
  "山中客",
  "江畔客",
  "楼船客",
  "云上客",
  "湖心客",
  "山海客",
  "风雪客",
  "残月客",
  "清风客",
  "闲云客",
  "行云客",
  "旧梦人",
  "故里人",
  "看客",
  "旁观者",
  "架构师",
  "炼丹师",
  "筑梦师",
  "寻梦人",
  "观星人",
  "写代码的人",
  "修 bug 的人",
  "熬夜人",
  "开卷人",
  "收刀人",
  "藏剑人",
  "持灯人",
  "挑担人",
  "抄经人",
  "画符人",
  "提壶人",
  "牧云人",
  "赶路人",
  "看山人",
  "听雨人",
  "钓雪人",
  "逐梦人",
  "问道人",
  "走江湖的人",
  "闯天涯的人",
  "观棋人",
  "煮茶人",
  "烤火人",
  "炼剑人",
  "打铁人",
  "摇铃人",
  "抚琴人",
  "听风人",
  "踏浪人",
  "登楼人",
  "入海人",
  "望月人",
  "追光人",
  "折花人",
  "提笔人",
  "磨剑人",
  "养剑人",
  "论道人",
  "写诗人",
  "算卦人",
  "摆摊人",
  "提壶行者",
  "负剑游人",
  "云游术士",
  "赛博游侠",
];

export const generateRandomNickName = () => {
  if (!ADJECTIVES.length || !NOUNS.length) return "";
  const adjective =
    ADJECTIVES[Math.floor(Math.random() * ADJECTIVES.length)];
  const noun = NOUNS[Math.floor(Math.random() * NOUNS.length)];
  return `${adjective}${noun}`;
};

// 下山准备工作词条
const DESCEND_PREPARATIONS = [
  "整理行囊中…",
  "检查干粮中…",
  "磨砺宝剑中…",
  "温习剑法中…",
  "收拾盘缠中…",
  "告别师门中…",
  "查看地图中…",
  "准备马匹中…",
  "收拾衣物中…",
  "检查装备中…",
  "研读秘籍中…",
  "打点行装中…",
  "准备干粮中…",
  "整理剑谱中…",
  "收拾细软中…",
  "检查暗器中…",
  "准备银两中…",
  "收拾书卷中…",
  "整理丹药中…",
  "检查符箓中…",
  "准备酒水中…",
  "收拾被褥中…",
  "整理信物中…",
  "检查令牌中…",
  "准备路引中…",
  "收拾笔墨中…",
  "整理行囊中…",
  "检查兵器中…",
  "准备火折中…",
  "收拾药囊中…",
  "整理行装中…",
  "检查马鞍中…",
  "准备水囊中…",
  "收拾斗笠中…",
  "整理蓑衣中…",
  "检查行囊中…",
  "准备干粮中…",
  "收拾剑鞘中…",
  "整理剑穗中…",
  "检查护心中…",
  "准备草鞋中…",
  "收拾包袱中…",
  "整理行头中…",
  "检查暗器中…",
  "准备信鸽中…",
  "收拾罗盘中…",
  "整理卦盘中…",
  "检查符纸中…",
  "准备朱砂中…",
  "收拾桃木剑中…",
  "整理法器中…",
  "检查护身符中…",
  "准备辟邪物中…",
  "收拾行囊中…",
  "整理装备中…",
  "检查行装中…",
  "准备下山令中…",
  "收拾江湖名帖中…",
  "整理身份文书中…",
  "检查通关文牒中…",
  "准备江湖路引中…",
];

/**
 * 获取随机下山准备工作文案
 * @returns 随机准备工作文案
 */
export const getRandomDescendPreparation = (): string => {
  return DESCEND_PREPARATIONS[
    Math.floor(Math.random() * DESCEND_PREPARATIONS.length)
  ];
};

/**
 * 自定义 Hook：在加载状态下随机显示下山准备工作文案
 * @param isLoading 是否处于加载状态
 * @param interval 更新间隔（毫秒），默认1000ms
 * @returns 当前显示的文案
 */
export const useDescendLoadingText = (
  isLoading: boolean,
  interval: number = 2000
): string => {
  const [text, setText] = useState<string>("下山中…");

  useEffect(() => {
    if (!isLoading) {
      setText("下山中…");
      return;
    }

    // 立即设置一次随机文案
    setText(getRandomDescendPreparation());

    // 设置定时器，每隔指定时间更新一次
    const timer = setInterval(() => {
      setText(getRandomDescendPreparation());
    }, interval);

    return () => {
      clearInterval(timer);
    };
  }, [isLoading, interval]);

  return text;
};

